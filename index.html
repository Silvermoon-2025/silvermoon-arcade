<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>银月的游戏咖厅</title>
    <link rel="icon" href="历史爱好者服务专设网站（网页图标）.ico" type="image/x-icon">
    <link rel="shortcut icon" href="历史爱好者服务专设网站（网页图标）.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
extend: {
    colors: {
        primary: '#165DFF',
        secondary: '#FFD166',
        neutral: '#F5F7FA',
        board: '#E6C388',
        black: '#000001',
        white: '#FFFFFF',
        nightBackground: '#121212',
        nightBoard: '#332a1b',
        nightText: '#e0e0e0',
        nightBlock: '#364969' // 新增夜间模式块的颜色
    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
@layer utilities {
    .content-auto {
        content-visibility: auto;
    }
    
    .flagpole {
        background-color: #8B4513;
        width: 4px;
        height: 100%;
        margin: 0 auto;
    }
    
    .flag {
        position: absolute;
        width: 120px;
        height: 80px;
        transition: top 0.5s ease;
        transform-origin: left top;
    }
    
    .circle-outer {
        width: 120px;
        height: 120px;
        border: 8px solid #ccc;
        border-radius: 50%;
        position: relative;
        margin: 20px auto;
    }
    
    .circle-inner {
        width: 40px;
        height: 40px;
        background-color: #165DFF;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        touch-action: none;
    }
    
    .platform {
        width: 200px;
        height: 10px;
        background-color: #666;
        margin: 0 auto;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
    }
    
    .升旗-container {
        height: 400px;
        position: relative;
        margin: 20px 0;
    }
    
    .flagpole {
        width: 4px;
        height: 100%;
        background-color: #666;
        position: absolute;
        left: 50%;
        top: 0;
        transform: translateX(-50%);
    }
    
    .flag {
        position: absolute;
        width: 120px;
        height: 80px;
        left: calc(50% + 2px);
        transform-origin: left top;
    }
    
    .circle-inner {
        width: 40px;
        height: 40px;
        background-color: #165DFF;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        touch-action: none;
    }
    
    .result-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
    }
    
    .result-overlay.active {
        opacity: 1;
        pointer-events: all;
    }
}

/* 暗色模式全局样式 */

body.dark-mode {
    background-color: theme('colors.nightBackground');
    color: theme('colors.nightText');
}

/* 在暗色模式下，将特定的灰色文本也转为夜间文本颜色 */
body.dark-mode .text-gray-600,
body.dark-mode .text-gray-700,
body.dark-mode .text-gray-800 {
    color: theme('colors.nightText');
}

body.dark-mode .game-status-container,
body.dark-mode .game-info-card {
    background-color: theme('colors.nightBlock');
    color: theme('colors.nightText');
}

body.dark-mode .btn-primary {
    background-color: theme('colors.primary');
    color: white;
}

body.dark-mode .btn-secondary {
    background-color: theme('colors.secondary');
    color: theme('colors.primary');
}

body.dark-mode header {
    background-color: #165DFF; /* 维持颜色 */
}

body.dark-mode .text-black {
    color: theme('colors.nightText');
}

</style>
</head>
<body class="bg-neutral min-h-screen font-sans text-black">
    <!-- 顶部导航栏 -->
    <header class="bg-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- 添加跳转块 -->
            <div class="flex items-center mb-4 md:mb-0">
                <a href="https://silvermoon-2025.github.io/historyloverweb/" class="flex items-center hover:opacity-90 transition-opacity">
                    <i class="fa fa-book text-2xl mr-2"></i>
                    <span class="text-xl font-bold">历史爱好者服务专设网站</span>
                </a>
            </div>
            <!-- 将网站标题名移动到右侧 -->
            <div class="flex items-center space-x-2">
                <i class="fa fa-gamepad text-secondary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold tracking-tight">银月的游戏咖厅</h1>
            </div>
            <!-- 音乐播放按钮（放在夜间模式按钮上方） -->
<button onclick="toggleMusic()" style="position:fixed; bottom:6rem; right:1.5rem; width:3rem; height:3rem; border-radius:50%; background:white; border:2px solid #3b82f6; cursor:pointer; z-index:999;">
  <i id="musicIcon" class="fa fa-music" style="color:#3b82f6; font-size:1.2rem;"></i>
</button>
            <!-- 夜间模式切换按钮 -->
<button id="theme-toggle" class="fixed bottom-6 right-6 w-32 h-14 rounded-full border-2 border-yellow-400 shadow-lg overflow-hidden transition-all duration-300 ease-in-out z-50 cursor-pointer hover:scale-105 active:scale-95">
    <div class="relative w-full h-full overflow-hidden">
        <!-- 白天模式背景 - 云彩 -->
        <div id="day-bg" class="absolute inset-0 bg-blue-100 transition-opacity duration-500 ease-in-out">
            <div class="absolute top-3 left-2 w-12 h-4 bg-white rounded-full"></div>
            <div class="absolute top-5 left-7 w-10 h-4 bg-white rounded-full"></div>
            <div class="absolute top-3 right-2 w-12 h-4 bg-white rounded-full"></div>
            <div class="absolute top-5 right-7 w-10 h-4 bg-white rounded-full"></div>
        </div>
        
        <!-- 夜晚模式背景 - 星星 -->
        <div id="night-bg" class="absolute inset-0 bg-black opacity-0 transition-opacity duration-500 ease-in-out">
            <!-- 星星只分布在左侧区域 -->
            <div class="absolute top-3 left-3 w-1 h-1 bg-yellow-300 rounded-full animate-pulse"></div>
            <div class="absolute top-6 left-8 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
            <div class="absolute top-4 left-12 w-1 h-1 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 1s"></div>
            <div class="absolute bottom-3 left-5 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 1.5s"></div>
            <div class="absolute bottom-5 left-10 w-1 h-1 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 2s"></div>
        </div>
        
        <!-- 太阳/月亮组合 -->
        <div id="toggle-icon" class="absolute top-1 w-12 h-12 rounded-full transition-transform duration-700 ease-in-out transform">
            <!-- 太阳 -->
            <div id="sun" class="absolute inset-0 w-full h-full bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50 transition-opacity duration-300 ease-in-out">
                <!-- 太阳光芒 -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="absolute w-14 h-1.5 bg-yellow-400 rounded-full"></div>
                    <div class="absolute w-1.5 h-14 bg-yellow-400 rounded-full"></div>
                    <div class="absolute w-10 h-1.5 bg-yellow-400 rounded-full transform rotate-45"></div>
                    <div class="absolute w-1.5 h-10 bg-yellow-400 rounded-full transform rotate-45"></div>
                </div>
            </div>
            
            <!-- 月亮 -->
            <div id="moon" class="absolute inset-0 w-full h-full bg-gray-200 rounded-full shadow-lg opacity-0 transition-opacity duration-300 ease-in-out">
                <!-- 月亮坑洼 -->
                <div class="absolute top-2 left-2 w-2 h-2 bg-gray-300 rounded-full"></div>
                <div class="absolute top-4 right-3 w-1.5 h-1.5 bg-gray-300 rounded-full"></div>
                <div class="absolute bottom-3 left-3 w-2.5 h-2.5 bg-gray-300 rounded-full"></div>
            </div>
        </div>
    </div>
</button>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 开放时间区域 -->
        <div class="text-center mb-8">
            <p class="text-lg font-medium">开放时间</p>
            <p class="text-xs text-gray-600">Open Time</p>
            <p class="text-sm">2025年10月1日 - 2025年10月2日</p>
        </div>

        <!-- 站嵌音乐信息块 -->
<div class="max-w-md mx-auto mb-8 relative">
  <!-- 卡片主体 -->
  <div class="bg-white dark:bg-blue-700 rounded-xl p-5 shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
    <!-- 标题区域 -->
    <div class="flex items-center justify-between mb-4 pb-3 border-b border-gray-100 dark:border-gray-700">
      <h3 class="text-lg font-bold text-gray-800 dark:text-white flex items-center">
        <span class="w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mr-2">
          <i class="fa fa-music text-blue-600 dark:text-blue-400 text-sm"></i>
        </span>
        【站嵌音乐】
      </h3>
      <span class="text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300">
        音乐信息
      </span>
    </div>
    
    <!-- 内容区域 -->
    <div class="grid grid-cols-1 gap-3 text-sm">
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">绑定时间：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">2025年10月1日</span>
      </div>
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">绑定音乐：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">义勇军进行曲 - 中国人民解放军军乐团,陈燮阳,上海交响乐团</span>
      </div>
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">续播时间：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">2025年10月1日~2025年10月2日</span>
      </div>
    </div>
  </div>
  
  <!-- 装饰元素 -->
  <div class="absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg opacity-20 dark:opacity-30"></div>
</div>

        <!-- 游戏标题 -->
        <div class="text-center mb-8">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-primary mb-2">升旗挑战 - 模拟升旗游戏</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">长按并顺时针摇动圆圈来升起国旗，松开则国旗会缓缓下降。将国旗升到顶端完成挑战！</p>
        </div>

        <!-- 游戏状态信息 -->
        <div class="flex justify-between items-center mb-4 px-4 py-3 bg-white rounded-lg shadow-sm">
            <div class="flex items-center">
                <div class="w-6 h-6 rounded-full bg-red-600 mr-3"></div>
                <span id="game-status" class="font-medium">当前状态: 准备就绪</span>
            </div>
            <button id="restart-btn" class="bg-secondary hover:bg-opacity-90 text-primary px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center">
                <i class="fa fa-refresh mr-2"></i> 重新开始
            </button>
        </div>

        <!-- 游戏区域 -->
        <div class="flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-6">
            <!-- 升旗区域 -->
            <div class="relative bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <!-- 旗台 -->
                <div class="platform"></div>
                
                <!-- 旗杆和旗帜容器 -->
                <div class="升旗-container">
                    <div class="flagpole"></div>
                    <div id="flag" class="flag" style="top: 320px; left: calc(50% + 2px);">
                        <img src="the National Flag of the PRC.png alt"="五星红旗" class="w-full h-full object-cover">
                    </div>
                </div>
                
                <!-- 摇动控制区 -->
                <div class="mt-6">
                    <div class="circle-outer">
                        <div id="circle-inner" class="circle-inner"></div>
                    </div>
                    <div class="text-center mt-4">
                        <p class="text-gray-600">摇动次数: <span id="shake-count" class="font-medium">0</span></p>
                    </div>
                </div>
            </div>

            <!-- 游戏信息和控制区 -->
            <div class="w-full md:w-64 bg-white rounded-lg shadow-lg p-4">
                <h3 class="text-lg font-semibold mb-3 pb-2 border-b border-gray-200">游戏信息</h3>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">游戏规则</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• 长按中央小圆圈并顺时针摇动</li>
                        <li>• 每次有效摇动会使国旗上升</li>
                        <li>• 松开手指，国旗会缓缓下降</li>
                        <li>• 将国旗升到旗杆顶端即完成挑战</li>
                        <li>• 尽量用最少的摇动次数完成</li>
                    </ul>
                    <h4 class="font-medium mb-2">最佳标准</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• 国歌结束的时候刚好完成升旗</li>
                    </ul>
                </div>
                
                <div class="mt-6">
                    <button id="help-btn" class="w-full bg-gray-200 hover:bg-gray-300 text-primary px-4 py-2 rounded-lg font-medium transition-all duration-200">
                        <i class="fa fa-question-circle mr-2"></i> 游戏帮助
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 游戏结果遮罩 -->
        <div id="result-overlay" class="result-overlay">
            <h3 class="text-4xl font-bold text-white mb-6">恭喜，您已完成升旗挑战！</h3>
            <p class="text-xl text-white mb-6">总摇动次数: <span id="total-shakes" class="font-medium">0</span></p>
            <button id="play-again-btn" class="bg-secondary hover:bg-opacity-90 text-primary px-6 py-3 rounded-lg font-medium text-lg transition-all duration-200 transform hover:scale-105">
                再来一次
            </button>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-primary text-white mt-12 py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-lg font-semibold">银月的游戏咖厅</p>
                    <p class="text-sm text-white/80 mt-1">本网站仅供娱乐消遣而用</p>
                </div>
                <div class="text-right">
                    <p class="text-sm">
                        [发布地] 中国-北京<br>
                        [网站创建时间] 2025年7月5日<br>
                        [网页名称] 银月的游戏咖厅<br>
                        [特别鸣谢] 我不是徐某人（QQ）
                    </p>
                </div>
            </div>
            <div class="mt-6 pt-4 border-t border-white/20 text-center text-sm text-white/70">
                <p>© 2025 银月的游戏咖厅</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 获取DOM元素
            const circleInner = document.getElementById('circle-inner');
            const flag = document.getElementById('flag');
            const shakeCountElement = document.getElementById('shake-count');
            const gameStatusElement = document.getElementById('game-status');
            const restartButton = document.getElementById('restart-btn');
            const playAgainButton = document.getElementById('play-again-btn');
            const resultOverlay = document.getElementById('result-overlay');
            const totalShakesElement = document.getElementById('total-shakes');
            const helpButton = document.getElementById('help-btn');
            
            // 游戏状态
            let isDragging = false;
            let startAngle = 0;
            let currentAngle = 0;
            let shakeCount = 0;
            let flagPosition = 320; // 旗帜初始位置（底部）
            let isRising = false;
            let isFalling = false;
            let gameActive = true;
            
            // 圆圈中心点
            const circleCenter = {
                x: 60, // 外圆半径
                y: 60
            };
            
            // 国旗上升和下降的速度
            const RISE_SPEED = 0.12; // 调整为42秒到达顶部
            const FALL_SPEED = 0.3;
            
            // 计算两点之间的角度
            function getAngle(x1, y1, x2, y2) {
                return Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            }
            
            // 更新旗帜位置
            let updateLoopRunning = false;
            function updateFlagPosition() {
                updateLoopRunning = true;
                if (!gameActive) {
                    updateLoopRunning = false;
                    return;
                }
                
                if (isRising) {
                    flagPosition = Math.max(0, flagPosition - RISE_SPEED);
                    flag.style.top = `${flagPosition}px`;
                    
                    // 检查是否到达顶部
                    if (flagPosition <= 0) {
                        gameActive = false;
                        updateLoopRunning = false;
                        endGame();
                        return;
                    }
                } else if (isFalling) {
                    flagPosition = Math.min(320, flagPosition + FALL_SPEED);
                    flag.style.top = `${flagPosition}px`;
                }
                
                requestAnimationFrame(updateFlagPosition);
            }
            
            // 开始更新旗帜位置
            updateFlagPosition();
            
            // 处理开始拖动
            function startDrag(e) {
                if (!gameActive) return;
                
                isDragging = true;
                isRising = true;
                isFalling = false;
                gameStatusElement.textContent = '当前状态: 升旗中...';
                
                // 获取触摸/鼠标位置
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                
                // 获取元素位置
                const rect = circleInner.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                // 计算初始角度
                startAngle = getAngle(centerX, centerY, clientX, clientY);
                currentAngle = startAngle;
            }
            
            // 处理拖动
            function handleDrag(e) {
                if (!isDragging || !gameActive) return;
                
                // 防止页面滚动
                e.preventDefault();
                
                // 获取触摸/鼠标位置
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                
                // 获取元素位置
                const rect = circleInner.getBoundingClientRect();
                const outerCircle = document.querySelector('.circle-outer');
                const outerRect = outerCircle.getBoundingClientRect();
                const centerX = outerRect.left + outerRect.width / 2;
                const centerY = outerRect.top + outerRect.height / 2;
                
                // 让小圈随拖拽移动
                const dx = clientX - centerX;
                const dy = clientY - centerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const maxDistance = (outerRect.width - rect.width) / 2;
                const clampedDistance = Math.min(distance, maxDistance);
                const angle = Math.atan2(dy, dx);
                
                const newX = clampedDistance * Math.cos(angle);
                const newY = clampedDistance * Math.sin(angle);
                
                circleInner.style.transform = `translate(-50%, -50%) translate(${newX}px, ${newY}px)`;
                
                // 计算当前角度
                const newAngle = getAngle(centerX, centerY, clientX, clientY);
                const angleDiff = newAngle - currentAngle;
                
                // 检测顺时针旋转超过一定角度（30度）
                if (angleDiff > 30 && angleDiff < 330) {
                    shakeCount++;
                    shakeCountElement.textContent = shakeCount;
                    currentAngle = newAngle;
                } else if (angleDiff < -330) {
                    // 处理角度环绕的情况
                    shakeCount++;
                    shakeCountElement.textContent = shakeCount;
                    currentAngle = newAngle;
                }
                
                currentAngle = newAngle;
            }
            
            // 处理结束拖动
            function endDrag() {
                if (!isDragging) return;
                
                isDragging = false;
                isRising = false;
                isFalling = true;
                gameStatusElement.textContent = '当前状态: 旗帜下降中';
                
                // 释放拖动时，小圈回到中心
                circleInner.style.transform = 'translate(-50%, -50%)';
            }
            
            // 结束游戏
            function endGame() {
                resultOverlay.classList.add('active');
                totalShakesElement.textContent = shakeCount;
                gameStatusElement.textContent = '当前状态: 挑战完成！';
            }
            
            // 重置游戏
            function resetGame() {
                shakeCount = 0;
                flagPosition = 320;
                flag.style.top = `${flagPosition}px`;
                flag.style.right = '54px'; // 确保旗子在右侧
                shakeCountElement.textContent = shakeCount;
                resultOverlay.classList.remove('active');
                gameActive = true;
                isRising = false;
                isFalling = false;
                gameStatusElement.textContent = '当前状态: 准备就绪';
                
                // 确保updateFlagPosition函数在重新开始后继续运行
                if (!updateLoopRunning) {
                    updateFlagPosition();
                }
            }
            
            // 显示帮助信息
            function showHelp() {
                alert('游戏说明：\n1. 长按中央蓝色小圆圈并顺时针摇动\n2. 每次有效摇动会使国旗上升一点\n3. 松开手指，国旗会缓缓下降\n4. 将国旗升到旗杆顶端即完成挑战\n5. 尽量用最少的摇动次数完成');
            }
            
            // 事件监听 - 鼠标
            circleInner.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', handleDrag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('mouseleave', endDrag);
            
            // 事件监听 - 触摸
            circleInner.addEventListener('touchstart', startDrag);
            document.addEventListener('touchmove', handleDrag);
            document.addEventListener('touchend', endDrag);
            
            // 按钮事件
            restartButton.addEventListener('click', resetGame);
            playAgainButton.addEventListener('click', resetGame);
            helpButton.addEventListener('click', showHelp);
            
            // 切换夜间模式
            const themeToggle = document.getElementById('theme-toggle');
            const toggleIcon = document.getElementById('toggle-icon');
            const sun = document.getElementById('sun');
            const moon = document.getElementById('moon');
            const dayBg = document.getElementById('day-bg');
            const nightBg = document.getElementById('night-bg');
            const body = document.body;

            // 计算按钮位置的辅助函数
            const calculateTranslateX = () => {
                const buttonWidth = themeToggle.offsetWidth;
                const iconWidth = toggleIcon.offsetWidth;
                const borderWidth = 2;
                return buttonWidth - iconWidth - (borderWidth * 2);
            };

            // 应用深色模式
            function applyDarkMode() {
                body.classList.add('dark-mode');
                const translateX = calculateTranslateX() - 2;
                toggleIcon.style.transform = `translateX(${translateX}px)`;
                setTimeout(() => {
                    sun.style.opacity = '0';
                    moon.style.opacity = '1';
                }, 300);
                dayBg.style.opacity = '0';
                nightBg.style.opacity = '1';
                
                // 只切换白色背景元素到夜间模式颜色
                document.querySelectorAll('.bg-white').forEach(el => {
                    el.classList.remove('bg-white');
                    el.classList.add('bg-nightBlock');
                });
            }

            // 应用浅色模式
            function applyLightMode() {
                body.classList.remove('dark-mode');
                sun.style.opacity = '1';
                moon.style.opacity = '0';
                setTimeout(() => {
                    toggleIcon.style.transform = 'translateX(0)';
                }, 100);
                dayBg.style.opacity = '1';
                nightBg.style.opacity = '0';
                
                // 恢复白色背景元素
                document.querySelectorAll('.bg-nightBlock').forEach(el => {
                    el.classList.remove('bg-nightBlock');
                    el.classList.add('bg-white');
                });
            }

            // 按钮点击事件
            themeToggle.addEventListener('click', () => {
                if (body.classList.contains('dark-mode')) {
                    applyLightMode();
                    localStorage.setItem('darkMode', 'false');
                } else {
                    applyDarkMode();
                    localStorage.setItem('darkMode', 'true');
                }
            });

            // 检查本地存储中的主题偏好
            const isDarkMode = localStorage.getItem('darkMode') === 'true';

            // 初始化主题
            if (isDarkMode) {
                applyDarkMode();
            } else {
                toggleIcon.style.left = '2px';
            }
            
            // 音乐播放功能已在页面底部实现
        });
    </script>
            <!-- 音频播放核心组件（放在页面底部） -->
<audio id="myAudio" src="银月的游戏咖厅.mp3" loop></audio>
<!-- 音乐控制脚本（放在页面最底部的script中） -->
<script>
function toggleMusic() {
  const audio = document.getElementById("myAudio");
  const icon = document.getElementById("musicIcon");
  const button = icon.parentElement;
  
  if (audio.paused) {
    // 播放
    audio.play().then(() => {
      button.style.background = "#3b82f6";
      icon.className = "fa fa-pause";
      icon.style.color = "white";
    }).catch(e => {
      alert("播放失败: " + e.message);
      console.log(e);
    });
  } else {
    // 暂停
    audio.pause();
    button.style.background = "white";
    icon.className = "fa fa-music";
    icon.style.color = "#3b82f6";
  }
}
</script>
</body>

</html>
