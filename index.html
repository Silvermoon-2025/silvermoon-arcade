
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>银月的游戏咖厅</title>
    <link rel="icon" href="历史爱好者服务专设网站（网页图标）.ico" type="image/x-icon">
    <link rel="shortcut icon" href="历史爱好者服务专设网站（网页图标）.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
extend: {
    colors: {
        primary: '#165DFF',
        secondary: '#FFD166',
        neutral: '#F5F7FA',
        board: '#E6C388',
        black: '#000001',
        white: '#FFFFFF',
        nightBackground: '#121212',
        nightBoard: '#332a1b',
        nightText: '#e0e0e0',
        nightBlock: '#364969' // 新增夜间模式块的颜色
    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
@layer utilities {
    .content-auto {
        content-visibility: auto;
    }
    
    .province-item {
        width: 100px;
        height: 60px;
        margin: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        transition: all 0.3s ease;
        cursor: default;
        font-weight: 500;
    }
    
    .province-unlit {
        background-color: #e2e8f0;
        color: transparent;
        border: 2px dashed #94a3b8;
    }
    
    .province-lit {
        background-color: #3b82f6;
        color: white;
        border: 2px solid #2563eb;
        transform: scale(1.05);
    }
    
    .result-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
    }
    
    .result-overlay.active {
        opacity: 1;
        pointer-events: all;
    }
}

/* 暗色模式全局样式 */

body.dark-mode {
    background-color: theme('colors.nightBackground');
    color: theme('colors.nightText');
}

/* 在暗色模式下，将特定的灰色文本也转为夜间文本颜色 */
body.dark-mode .text-gray-600,
body.dark-mode .text-gray-700,
body.dark-mode .text-gray-800 {
    color: theme('colors.nightText');
}

body.dark-mode .game-status-container,
body.dark-mode .game-info-card {
    background-color: theme('colors.nightBlock');
    color: theme('colors.nightText');
}

body.dark-mode .btn-primary {
    background-color: theme('colors.primary');
    color: white;
}

body.dark-mode .btn-secondary {
    background-color: theme('colors.secondary');
    color: theme('colors.primary');
}

body.dark-mode .text-black {
    color: theme('colors.nightText');
}

/* 暗色模式下的省份样式 */
body.dark-mode .province-unlit {
    background-color: #1e293b;
    border-color: #475569;
}

body.dark-mode .province-lit {
    background-color: #3b82f6;
    color: white;
    border-color: #60a5fa;
}

</style>
</head>
<body class="bg-neutral min-h-screen font-sans text-black">
    <!-- 顶部导航栏 -->
    <header class="bg-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- 添加跳转块 -->
            <div class="flex items-center mb-4 md:mb-0">
                <a href="https://silvermoon-2025.github.io/historyloverweb/" class="flex items-center hover:opacity-90 transition-opacity">
                    <i class="fa fa-book text-2xl mr-2"></i>
                    <span class="text-xl font-bold">历史爱好者服务专设网站</span>
                </a>
            </div>
            <!-- 将网站标题名移动到右侧 -->
            <div class="flex items-center space-x-2">
                <i class="fa fa-gamepad text-secondary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold tracking-tight">银月的游戏咖厅</h1>
            </div>
            <!-- 音乐播放按钮（放在夜间模式按钮上方） -->
<button onclick="toggleMusic()" style="position:fixed; bottom:6rem; right:1.5rem; width:3rem; height:3rem; border-radius:50%; background:white; border:2px solid #3b82f6; cursor:pointer; z-index:999;">
  <i id="musicIcon" class="fa fa-music" style="color:#3b82f6; font-size:1.2rem;"></i>
</button>
            <!-- 夜间模式切换按钮 -->
<button id="theme-toggle" class="fixed bottom-6 right-6 w-32 h-14 rounded-full border-2 border-yellow-400 shadow-lg overflow-hidden transition-all duration-300 ease-in-out z-50 cursor-pointer hover:scale-105 active:scale-95">
    <div class="relative w-full h-full overflow-hidden">
        <!-- 白天模式背景 - 云彩 -->
        <div id="day-bg" class="absolute inset-0 bg-blue-100 transition-opacity duration-500 ease-in-out">
            <div class="absolute top-3 left-2 w-12 h-4 bg-white rounded-full"></div>
            <div class="absolute top-5 left-7 w-10 h-4 bg-white rounded-full"></div>
            <div class="absolute top-3 right-2 w-12 h-4 bg-white rounded-full"></div>
            <div class="absolute top-5 right-7 w-10 h-4 bg-white rounded-full"></div>
        </div>
        
        <!-- 夜晚模式背景 - 星星 -->
        <div id="night-bg" class="absolute inset-0 bg-black opacity-0 transition-opacity duration-500 ease-in-out">
            <!-- 星星只分布在左侧区域 -->
            <div class="absolute top-3 left-3 w-1 h-1 bg-yellow-300 rounded-full animate-pulse"></div>
            <div class="absolute top-6 left-8 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
            <div class="absolute top-4 left-12 w-1 h-1 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 1s"></div>
            <div class="absolute bottom-3 left-5 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 1.5s"></div>
            <div class="absolute bottom-5 left-10 w-1 h-1 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 2s"></div>
        </div>
        
        <!-- 太阳/月亮组合 -->
        <div id="toggle-icon" class="absolute top-1 w-12 h-12 rounded-full transition-transform duration-700 ease-in-out transform">
            <!-- 太阳 -->
            <div id="sun" class="absolute inset-0 w-full h-full bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50 transition-opacity duration-300 ease-in-out">
                <!-- 太阳光芒 -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="absolute w-14 h-1.5 bg-yellow-400 rounded-full"></div>
                    <div class="absolute w-1.5 h-14 bg-yellow-400 rounded-full"></div>
                    <div class="absolute w-10 h-1.5 bg-yellow-400 rounded-full transform rotate-45"></div>
                    <div class="absolute w-1.5 h-10 bg-yellow-400 rounded-full transform rotate-45"></div>
                </div>
            </div>
            
            <!-- 月亮 -->
            <div id="moon" class="absolute inset-0 w-full h-full bg-gray-200 rounded-full shadow-lg opacity-0 transition-opacity duration-300 ease-in-out">
                <!-- 月亮坑洼 -->
                <div class="absolute top-2 left-2 w-2 h-2 bg-gray-300 rounded-full"></div>
                <div class="absolute top-4 right-3 w-1.5 h-1.5 bg-gray-300 rounded-full"></div>
                <div class="absolute bottom-3 left-3 w-2.5 h-2.5 bg-gray-300 rounded-full"></div>
            </div>
        </div>
    </div>
</button>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 开放时间区域 -->
        <div class="text-center mb-8">
            <p class="text-lg font-medium">开放时间</p>
            <p class="text-xs text-gray-600">Open Time</p>
            <p class="text-sm">2025年10月2日 - 2025年10月8日</p>
        </div>

        <!-- 站嵌音乐信息块 -->
<div class="max-w-md mx-auto mb-8 relative">
  <!-- 卡片主体 -->
  <div class="bg-white dark:bg-blue-700 rounded-xl p-5 shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700">
    <!-- 标题区域 -->
    <div class="flex items-center justify-between mb-4 pb-3 border-b border-gray-100 dark:border-gray-700">
      <h3 class="text-lg font-bold text-gray-800 dark:text-white flex items-center">
        <span class="w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mr-2">
          <i class="fa fa-music text-blue-600 dark:text-blue-400 text-sm"></i>
        </span>
        【站嵌音乐】
      </h3>
      <span class="text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300">
        音乐信息
      </span>
    </div>
    
    <!-- 内容区域 -->
    <div class="grid grid-cols-1 gap-3 text-sm">
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">绑定时间：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">2025年10月2日</span>
      </div>
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">绑定音乐：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">【bilibili音乐】一话一世界 《一花依世界》方言合唱版 - 雪霏岚岚、宁采臣丶在唱歌、漆柚柚柚、倒悬的橘子、早木旋子、Warma、YUKIri、-LKs-、張小她、A路人、 双笙子</span>
      </div>
      <div class="flex items-center">
        <span class="w-28 text-gray-500 dark:text-gray-400">续播时间：</span>
        <span class="text-gray-800 dark:text-gray-200 font-medium">2025年10月2日~2025年10月8日</span>
      </div>
    </div>
  </div>
  
  <!-- 装饰元素 -->
  <div class="absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg opacity-20 dark:opacity-30"></div>
</div>

        <!-- 游戏标题 -->
        <div class="text-center mb-8">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-primary mb-2">省份记忆游戏</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">在输入框中输入中国的省份、直辖市、特别行政区或自治区名称，正确输入后对应的区域将会被点亮。挑战在限定时间内点亮所有区域！</p>
        </div>

        <!-- 游戏状态信息 -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-4 px-4 py-3 bg-white rounded-lg shadow-sm">
            <div class="flex items-center mb-2 md:mb-0">
                <div class="w-6 h-6 rounded-full bg-red-600 mr-3"></div>
                <span id="game-status" class="font-medium">当前状态: 准备就绪</span>
            </div>
            <div class="flex items-center space-x-4">
                <div class="flex items-center">
                    <span class="text-gray-600 mr-2">倒计时: </span>
                    <span id="countdown" class="font-medium">2:30</span>
                </div>
                <div class="flex items-center">
                    <span class="text-gray-600 mr-2">已点亮: </span>
                    <span id="lit-count" class="font-medium">0</span>
                    <span class="text-gray-600 mx-1">/</span>
                    <span id="total-count" class="font-medium">34</span>
                </div>
                <button id="restart-btn" class="bg-secondary hover:bg-opacity-90 text-primary px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center">
                    <i class="fa fa-refresh mr-2"></i> 重新开始
                </button>
            </div>
        </div>

        <!-- 游戏区域 -->
        <div class="flex flex-col lg:flex-row justify-center items-start space-y-6 lg:space-y-0 lg:space-x-6">
            <!-- 输入区域 -->
            <div class="w-full lg:w-80 bg-white rounded-lg shadow-xl p-6">
                <h3 class="text-xl font-semibold mb-4">省份输入</h3>
                <div class="mb-4">
                    <label for="province-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">请输入省份/直辖市/特别行政区/自治区名称</label>
                    <input type="text" id="province-input" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="例如：北京市">
                </div>
                <button id="confirm-btn" class="w-full bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 flex items-center justify-center">
                    <i class="fa fa-check mr-2"></i> 确认
                </button>
                <div id="message" class="mt-4 text-center py-2 rounded-lg hidden"></div>
                
                <div class="mt-6">
                    <h4 class="font-medium mb-2">游戏规则</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• 在输入框中输入中国省级行政区名称</li>
                        <li>• 点击确认按钮验证输入</li>
                        <li>• 正确输入会点亮对应区域</li>
                        <li>• 限时2分30秒，点亮所有34个区域</li>
                        <li>• 可以使用简称（如"北京"而非"北京市"）</li>
                    </ul>
                </div>
            </div>

            <!-- 省份展示区域 -->
            <div class="w-full lg:flex-1 bg-white rounded-lg shadow-lg p-4">
                <h3 class="text-lg font-semibold mb-3 pb-2 border-b border-gray-200">待点亮区域</h3>
                <div id="provinces-container" class="flex flex-wrap justify-center">
                    <!-- 省份区域将通过JS动态生成 -->
                </div>
            </div>
        </div>
        
        <!-- 游戏结果遮罩 -->
        <div id="result-overlay" class="result-overlay">
            <h3 id="result-title" class="text-4xl font-bold text-white mb-6"></h3>
            <p id="result-stats" class="text-xl text-white mb-6"></p>
            <button id="play-again-btn" class="bg-secondary hover:bg-opacity-90 text-primary px-6 py-3 rounded-lg font-medium text-lg transition-all duration-200 transform hover:scale-105">
                再来一次
            </button>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-primary text-white mt-12 py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-lg font-semibold">银月的游戏咖厅</p>
                    <p class="text-sm text-white/80 mt-1">本网站仅供娱乐消遣而用</p>
                </div>
                <div class="text-right">
                    <p class="text-sm">
                        [发布地] 中国-北京<br>
                        [网站创建时间] 2025年7月5日<br>
                        [网页名称] 银月的游戏咖厅<br>
                        [特别鸣谢] 我不是徐某人（QQ）
                    </p>
                </div>
            </div>
            <div class="mt-6 pt-4 border-t border-white/20 text-center text-sm text-white/70">
                <p>© 2025 银月的游戏咖厅</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 中国省级行政区列表（包含全称和简称）
            const provinces = [
                { fullName: "北京市", shortName: "北京" },
                { fullName: "天津市", shortName: "天津" },
                { fullName: "河北省", shortName: "河北" },
                { fullName: "山西省", shortName: "山西" },
                { fullName: "内蒙古自治区", shortName: "内蒙古" },
                { fullName: "辽宁省", shortName: "辽宁" },
                { fullName: "吉林省", shortName: "吉林" },
                { fullName: "黑龙江省", shortName: "黑龙江" },
                { fullName: "上海市", shortName: "上海" },
                { fullName: "江苏省", shortName: "江苏" },
                { fullName: "浙江省", shortName: "浙江" },
                { fullName: "安徽省", shortName: "安徽" },
                { fullName: "福建省", shortName: "福建" },
                { fullName: "江西省", shortName: "江西" },
                { fullName: "山东省", shortName: "山东" },
                { fullName: "河南省", shortName: "河南" },
                { fullName: "湖北省", shortName: "湖北" },
                { fullName: "湖南省", shortName: "湖南" },
                { fullName: "广东省", shortName: "广东" },
                { fullName: "广西壮族自治区", shortName: "广西" },
                { fullName: "海南省", shortName: "海南" },
                { fullName: "重庆市", shortName: "重庆" },
                { fullName: "四川省", shortName: "四川" },
                { fullName: "贵州省", shortName: "贵州" },
                { fullName: "云南省", shortName: "云南" },
                { fullName: "西藏自治区", shortName: "西藏" },
                { fullName: "陕西省", shortName: "陕西" },
                { fullName: "甘肃省", shortName: "甘肃" },
                { fullName: "青海省", shortName: "青海" },
                { fullName: "宁夏回族自治区", shortName: "宁夏" },
                { fullName: "新疆维吾尔自治区", shortName: "新疆" },
                { fullName: "香港特别行政区", shortName: "香港" },
                { fullName: "澳门特别行政区", shortName: "澳门" },
                { fullName: "台湾省", shortName: "台湾" }
            ];
            
            // 获取DOM元素
            const provincesContainer = document.getElementById('provinces-container');
            const provinceInput = document.getElementById('province-input');
            const confirmBtn = document.getElementById('confirm-btn');
            const message = document.getElementById('message');
            const litCountElement = document.getElementById('lit-count');
            const totalCountElement = document.getElementById('total-count');
            const gameStatusElement = document.getElementById('game-status');
            const restartButton = document.getElementById('restart-btn');
            const playAgainButton = document.getElementById('play-again-btn');
            const resultOverlay = document.getElementById('result-overlay');
            const resultTitle = document.getElementById('result-title');
            const resultStats = document.getElementById('result-stats');
            const countdownElement = document.getElementById('countdown');
            
            // 游戏状态
            let litProvinces = [];
            let gameActive = true;
            let timeLeft = 2 * 60 + 30; // 2分30秒，以秒为单位
            let countdownInterval;
            
            // 初始化省份容器
            function initializeProvinces() {
                provincesContainer.innerHTML = '';
                provinces.forEach(province => {
                    const provinceElement = document.createElement('div');
                    provinceElement.className = 'province-item province-unlit';
                    provinceElement.dataset.fullName = province.fullName;
                    provinceElement.dataset.shortName = province.shortName;
                    provinceElement.textContent = province.fullName;
                    provincesContainer.appendChild(provinceElement);
                });
                
                totalCountElement.textContent = provinces.length;
                litCountElement.textContent = '0';
            }
            
            // 显示消息
            function showMessage(text, isError = false) {
                message.textContent = text;
                message.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
                
                if (isError) {
                    message.classList.add('bg-red-100', 'text-red-700');
                } else {
                    message.classList.add('bg-green-100', 'text-green-700');
                }
                
                // 3秒后隐藏消息
                setTimeout(() => {
                    message.classList.add('hidden');
                }, 3000);
            }
            
            // 检查并点亮省份
            function checkAndLightProvince(inputText) {
                if (!gameActive) return;
                
                const trimmedInput = inputText.trim();
                if (!trimmedInput) {
                    showMessage('请输入省份名称', true);
                    return;
                }
                
                // 查找匹配的省份
                const matchedProvince = provinces.find(prov => 
                    prov.fullName === trimmedInput || prov.shortName === trimmedInput
                );
                
                if (!matchedProvince) {
                    showMessage('名称输入错误，请重新输入', true);
                    return;
                }
                
                // 检查是否已经点亮
                if (litProvinces.includes(matchedProvince.fullName)) {
                    showMessage(`"${matchedProvince.fullName}"已经点亮了哦！`);
                    return;
                }
                
                // 点亮省份
                litProvinces.push(matchedProvince.fullName);
                const provinceElement = document.querySelector(`[data-full-name="${matchedProvince.fullName}"]`);
                provinceElement.classList.remove('province-unlit');
                provinceElement.classList.add('province-lit');
                
                // 更新计数
                litCountElement.textContent = litProvinces.length;
                showMessage(`恭喜，"${matchedProvince.fullName}"点亮成功！`);
                
                // 如果是第一个点亮的省份，将状态改为游戏进行中
                if (litProvinces.length === 1) {
                    gameStatusElement.textContent = '当前状态: 游戏进行中';
                }
                
                // 清空输入框
                provinceInput.value = '';
                
                // 检查是否全部点亮
                if (litProvinces.length === provinces.length) {
                    endGame(true);
                }
            }
            
            // 开始倒计时
            function startCountdown() {
                clearInterval(countdownInterval);
                
                countdownInterval = setInterval(() => {
                    timeLeft--;
                    
                    // 格式化时间显示
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    countdownElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    // 时间到
                    if (timeLeft <= 0) {
                        clearInterval(countdownInterval);
                        endGame(false);
                    }
                }, 1000);
            }
            
            // 结束游戏
            function endGame(isSuccess) {
                gameActive = false;
                clearInterval(countdownInterval);
                
                if (isSuccess) {
                    resultTitle.textContent = '恭喜你！你已成功完成点亮省份挑战。';
                    gameStatusElement.textContent = '当前状态: 挑战成功！';
                } else {
                    resultTitle.textContent = '你没有点亮全部省份，再接再厉。';
                    gameStatusElement.textContent = '当前状态: 挑战结束';
                }
                
                resultStats.textContent = `已点亮省份数: ${litProvinces.length}/${provinces.length}`;
                resultOverlay.classList.add('active');
            }
            
            // 重置游戏
            function resetGame() {
                litProvinces = [];
                gameActive = true;
                timeLeft = 2 * 60 + 30;
                countdownElement.textContent = '2:30';
                provinceInput.value = '';
                message.classList.add('hidden');
                resultOverlay.classList.remove('active');
                gameStatusElement.textContent = '当前状态: 准备就绪';
                
                // 重置所有省份为未点亮状态
                document.querySelectorAll('.province-item').forEach(item => {
                    item.classList.remove('province-lit');
                    item.classList.add('province-unlit');
                });
                
                litCountElement.textContent = '0';
                startCountdown();
            }
            
            // 事件监听
            confirmBtn.addEventListener('click', () => {
                checkAndLightProvince(provinceInput.value);
            });
            
            // 回车键提交
            provinceInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAndLightProvince(provinceInput.value);
                }
            });
            
            restartButton.addEventListener('click', resetGame);
            playAgainButton.addEventListener('click', resetGame);
            
            // 初始化游戏
            initializeProvinces();
            
            // 切换夜间模式
            const themeToggle = document.getElementById('theme-toggle');
            const toggleIcon = document.getElementById('toggle-icon');
            const sun = document.getElementById('sun');
            const moon = document.getElementById('moon');
            const dayBg = document.getElementById('day-bg');
            const nightBg = document.getElementById('night-bg');
            const body = document.body;

            // 计算按钮位置的辅助函数
            const calculateTranslateX = () => {
                const buttonWidth = themeToggle.offsetWidth;
                const iconWidth = toggleIcon.offsetWidth;
                const borderWidth = 2;
                return buttonWidth - iconWidth - (borderWidth * 2);
            };

            // 应用深色模式
            function applyDarkMode() {
                body.classList.add('dark-mode');
                const translateX = calculateTranslateX() - 2;
                toggleIcon.style.transform = `translateX(${translateX}px)`;
                setTimeout(() => {
                    sun.style.opacity = '0';
                    moon.style.opacity = '1';
                }, 300);
                dayBg.style.opacity = '0';
                nightBg.style.opacity = '1';
                
                // 只切换白色背景元素到夜间模式颜色
                document.querySelectorAll('.bg-white').forEach(el => {
                    el.classList.remove('bg-white');
                    el.classList.add('bg-nightBlock');
                });
            }

            // 应用浅色模式
            function applyLightMode() {
                body.classList.remove('dark-mode');
                sun.style.opacity = '1';
                moon.style.opacity = '0';
                setTimeout(() => {
                    toggleIcon.style.transform = 'translateX(0)';
                }, 100);
                dayBg.style.opacity = '1';
                nightBg.style.opacity = '0';
                
                // 恢复白色背景元素
                document.querySelectorAll('.bg-nightBlock').forEach(el => {
                    el.classList.remove('bg-nightBlock');
                    el.classList.add('bg-white');
                });
            }

            // 按钮点击事件
            themeToggle.addEventListener('click', () => {
                if (body.classList.contains('dark-mode')) {
                    applyLightMode();
                    localStorage.setItem('darkMode', 'false');
                } else {
                    applyDarkMode();
                    localStorage.setItem('darkMode', 'true');
                }
            });

            // 检查本地存储中的主题偏好
            const isDarkMode = localStorage.getItem('darkMode') === 'true';

            // 初始化主题
            if (isDarkMode) {
                applyDarkMode();
            } else {
                toggleIcon.style.left = '2px';
            }
            
            // 开始游戏倒计时
            startCountdown();
        });
    </script>
            <!-- 音频播放核心组件（放在页面底部） -->
<audio id="myAudio" src="银月的游戏咖厅.mp3" loop></audio>
<!-- 音乐控制脚本（放在页面最底部的script中） -->
<script>
function toggleMusic() {
  const audio = document.getElementById("myAudio");
  const icon = document.getElementById("musicIcon");
  const button = icon.parentElement;
  
  if (audio.paused) {
    // 播放
    audio.play().then(() => {
      button.style.background = "#3b82f6";
      icon.className = "fa fa-pause";
      icon.style.color = "white";
    }).catch(e => {
      alert("播放失败: " + e.message);
      console.log(e);
    });
  } else {
    // 暂停
    audio.pause();
    button.style.background = "white";
    icon.className = "fa fa-music";
    icon.style.color = "#3b82f6";
  }
}
</script>
</body>

</html>
